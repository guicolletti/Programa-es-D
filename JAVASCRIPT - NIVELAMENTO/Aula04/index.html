<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Totem de Lanchonete</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
    <div class="totem">
        <h1>Menu</h1>
        <div class="item" data-price="5.00">
            <span>Tentáculos de Molusco - R$ 575,00</span>

            <button class="btn btn-success add" onclick="adicionar_item(575.00)">
                <i class="bi bi-plus-lg"></i>
            </button>

            <button class="btn btn-danger remove" onclick="remover_item(575.00)">
                <i class="bi bi-dash-lg"></i>
            </button>
 
        </div>
        <div class="item" data-price="4.00">
            <span>Erva Medicinal - R$ 4.000,00</span>
            <button class="btn btn-success add" onclick="adicionar_item(4000.00)">
                <i class="bi bi-plus-lg"></i>
            </button>

            <button class="btn btn-danger remove" onclick="remover_item(4000.00)">
                <i class="bi bi-dash-lg"></i>
            </button>
        </div>
        <div class="item" data-price="3.00">
            <span>Refrigerante Desgaseficado - R$ 3,00</span>
            <button class="btn btn-success add" onclick="adicionar_item(3.00)">
                <i class="bi bi-plus-lg"></i>
            </button>

            <button class="btn btn-danger remove" onclick="remover_item(3.00)">
                <i class="bi bi-dash-lg"></i>
            </button>
        </div>
        <div class="item" data-price="6.00">
            <span>Torre de Pizza - R$ 600,00</span>
            <button class="btn btn-success add" onclick="adicionar_item(600.00)">
                <i class="bi bi-plus-lg"></i>
            </button>

            <button class="btn btn-danger remove" onclick="remover_item(600.00)">
                <i class="bi bi-dash-lg"></i>
            </button>
        </div>
        <div class="item" data-price="4.50">
            <span>Hambúrguer de Sirí - R$ 45,00</span>
            <button class="btn btn-success add" onclick="adicionar_item(45.00)">
                <i class="bi bi-plus-lg"></i>
            </button>

            <button class="btn btn-danger remove" onclick="remover_item(45.00)">
                <i class="bi bi-dash-lg"></i>
            </button>
        </div>
        <div class="item" data-price="2.50">
            <span>Água Oxígenada - R$ 2,50</span>
            <button class="btn btn-success add" onclick="adicionar_item(2.50)">
                <i class="bi bi-plus-lg"></i>
            </button>

            <button class="btn btn-danger remove" onclick="remover_item(2.50)">
                <i class="bi bi-dash-lg"></i>
            </button>
        </div>

        <div class="total">
            <h2>Total: R$ <span id="total">0.00</span></h2>
        </div>

        <div class="total">
            <input class="form-control" placeholder="Tem cupom ?" type="text" id="cupom">
            <button class="btn bg-info" onclick="aplicar_cupom()">Aplicar</button>
        </div>

        <div class="total">
            <h2>Desconto: R$ <span id="total-desconto">0.00</span></h2>
        </div>

        <div class="total">
            <h2>Total: R$ <span id="valor-total">0.00</span></h2>
        </div>
    </div>
</body>

<script>
    let valorTotal = 0.0
    let desconto = 0.0
    const totalHtml = document.getElementById("total")
    const cupons = [
        {
            "codigo": "MOISES10",
            "desconto": 10,
        },
        {
            "codigo": "FLAVIA15",
            "desconto": 15
        },
        {
            "codigo": "JANDERSON20",
            "desconto": 20
        },
        {
            "codigo": "THOMAS100",
            "desconto": 100
        },
        {
            "codigo": "OTAVIO22",
            "desconto": 22
        },
        {
            "codigo": "LUIS13",
            "desconto": 0.13
        },
        {
            "codigo": "LEO17",
            "desconto": 17
        },
        {
            "codigo": "FLOWEYLIXO",
            "desconto": 0
        },
        {
            "codigo": "SANSACIONAL",
            "desconto": 100
        }
    ]

    function aplicar_cupom() {
        const codigo = document.getElementById("cupom").value
        
        // passa por todos os cupons
        for (let i=0; i < cupons.length; i++) {
            const cupom = cupons[i]

            if (cupom.codigo == codigo) {
                // fornece o desconto
                desconto = cupom.desconto
            }
        }

        // aplica o cupom
        const valorDesconto = valorTotal * (desconto / 100)
        valorTotal = valorTotal - valorDesconto

        const descontoHTML = document.getElementById("total-desconto")
        descontoHTML.textContent = valorDesconto.toFixed(2)

        const totalHTML = document.getElementById("valor-total")
        totalHTML.textContent = valorTotal.toFixed(2)
        
    }

    function adicionar_item(valor) {
        valorTotal += valor;
        totalHtml.textContent = valorTotal.toFixed(2)
    }

    function remover_item(valor) {
        if (valor > valorTotal) {
            alert("Valor inválido !")
        } else {
            valorTotal -= valor;
            totalHtml.textContent = valorTotal.toFixed(2)
        }
    }
</script>


</html>
